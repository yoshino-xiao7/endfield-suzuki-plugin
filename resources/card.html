<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <style>
        {
                {
                @cardCss
            }
        }
    </style>
    <title>Endfield Characters</title>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <img src="{{player.avatar}}" class="header-avatar">
                <div>
                    <div class="header-title">{{player.name}}</div>
                    <div class="header-subtitle">Lv.{{player.level}} • World {{player.worldLevel}}</div>
                </div>
            </div>
            <div class="header-right">
                <div class="uid-badge">UID: {{player.uid}}</div>
                <div>干员数: {{player.charNum}}</div>
                <div style="margin-top: 4px;">{{player.updateTime}}</div>
            </div>
        </div>

        <!-- Character List -->
        <div class="char-list">
            {{each characters char}}
            <div class="char-card rarity-{{char.rarity}}">

                <!-- Col 1: Basic Info -->
                <div class="col-info">
                    <div class="char-avatar-container">
                        <img class="char-avatar" src="{{char.avatar}}">
                        <div class="char-evolve">E{{char.evolvePhase}}</div>
                    </div>
                    <div class="char-name">{{char.name}}</div>
                    <div class="char-meta">
                        <span class="char-level">Lv.{{char.level}}</span>
                        <span>{{char.profession}}</span>
                    </div>
                </div>

                <!-- Col 2: Equipment -->
                <div class="col-equip">
                    <!-- Weapon -->
                    <div class="weapon-row">
                        {{if char.weapon}}
                        <img class="weapon-icon" src="{{char.weapon.icon}}">
                        <div class="weapon-info">
                            <span class="weapon-name">{{char.weapon.name}}</span>
                            <span class="weapon-level">Lv.{{char.weapon.level}}</span>
                        </div>
                        {{else}}
                        <div class="weapon-icon" style="opacity: 0.3;"></div>
                        <span class="weapon-name" style="color: #555;">未装备</span>
                        {{/if}}
                    </div>

                    <!-- Equipment Slots (Armor -> Accessories) -->
                    <div class="equip-row">
                        {{each char.equips equip}}
                        <div class="equip-item">
                            <img class="equip-img" src="{{equip.icon}}">
                            <div class="equip-level">{{equip.level}}</div>
                        </div>
                        {{/each}}
                        <!-- Fill empty slots if less than 5 items (Body, Arm, Acc1, Acc2, Tactical) -->
                        <% for(var i=char.equips.length; i < 5; i++){ %>
                            <div class="empty-slot"></div>
                            <% } %>
                    </div>
                </div>

                <!-- Col 3: Skills -->
                <div class="col-skills">
                    {{each char.skills skill}}
                    <div class="skill-item">
                        <div class="skill-icon-container">
                            <img class="skill-img" src="{{skill.icon}}">
                        </div>
                        <div class="skill-level {{if skill.level >= skill.maxLevel}}max{{/if}}">{{skill.level}}</div>
                        <!-- <div class="skill-type">{{skill.type}}</div> -->
                    </div>
                    {{/each}}
                </div>

            </div>
            {{/each}}
        </div>

        <!-- Footer -->
        <div class="footer">
            Powered by Endfield Suzuki Plugin
        </div>
    </div>
</body>

</html>